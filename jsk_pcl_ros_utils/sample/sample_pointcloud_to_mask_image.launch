<launch>

  <arg name="gui" default="true" />

  <arg name="INPUT_IMAGE" default="/zed/rgb/image_rect_color" />
  <arg name="INPUT_CLOUD" default="/pc_transformer/output" />
  <arg name="INPUT_DEPTH" default="/zed/depth/depth_registered" />

  <node name="pointcloud_to_mask_image"
        pkg="jsk_pcl_ros_utils" type="pointcloud_to_mask_image">
    <remap from="~input" to="$(arg INPUT_CLOUD)" />
  </node>

  <node name="depth_to_mask_image"
        pkg="jsk_pcl_ros_utils" type="pointcloud_to_mask_image">
    <remap from="~input/depth" to="$(arg INPUT_DEPTH)" />
    <rosparam>
      z_near: 0.0
      z_far: 0.3
    </rosparam>
  </node>

  <node name="apply_mask_image"
        pkg="nodelet" type="nodelet"
        args="standalone jsk_perception/ApplyMaskImage">
    <remap from="~input" to="$(arg INPUT_IMAGE)" />
    <!-- <remap from="~input/mask" to="/pointcloud_to_mask_image/output" /> -->
    <remap from="~input/mask" to="/depth_to_mask_image/output" />
    <rosparam>
      approximate_sync: true
    </rosparam>
  </node>

</launch>
